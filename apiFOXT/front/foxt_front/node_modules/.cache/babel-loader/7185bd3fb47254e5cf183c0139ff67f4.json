{"ast":null,"code":"var _jsxFileName = \"/var/www/foxt_partage/FOXT/front/foxt_front/src/Components/Connection/Connection.js\",\n    _s = $RefreshSig$();\n\nimport './Connection.css';\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Connection = props => {\n  _s();\n\n  console.log(props);\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState(\"\");\n\n  const handleChange = event => {\n    const value = event.currentTarget.value;\n    const name = event.currentTarget.name;\n    setCredentials({ ...credentials,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    console.log(credentials);\n    let cle;\n\n    try {\n      const token = await Axios.post(\"https://127.0.0.1:8000/api/login_check\", credentials).then(response => cle = response.data.token);\n      console.log(cle);\n      var decoded = jwt_decode(token);\n      localStorage.role = decoded.roles[0];\n      localStorage.username = decoded.username;\n      localStorage.prenom = decoded.prenom;\n      localStorage.nom = decoded.nom;\n      {\n        localStorage.role == \"courrier\" && (window.location.href = \"/clients/liste/\");\n      }\n      ; // .then(response => window.location.href = \"/clients/liste/\")\n      // Stockage du token dans le local storage\n\n      window.localStorage.setItem(\"authToken\", token); // On prévient Axios qu'on a un header par défaut sur toutes nos futures requetes\n\n      Axios.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n    } catch (error) {\n      console.log(error.response);\n      setError(\"Aucun compte ne possède cette adresse\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"h-100 gradient-form\",\n      styles: \"background-color: #eee;\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container py-5 h-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row d-flex justify-content-center align-items-center h-100\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xl-10\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card rounded-3 text-black\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row g-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-lg-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-body p-md-5 mx-md-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                        className: \"mt-1 mb-5 pb-1\",\n                        children: \"CONNEXION\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 73,\n                        columnNumber: 19\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 71,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                      onSubmit: handleSubmit,\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"username\",\n                          children: \"Adresse email\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 77,\n                          columnNumber: 17\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          value: credentials.username,\n                          onChange: handleChange,\n                          type: \"email\",\n                          placeholder: \"Adresse mail de connexion\",\n                          name: \"username\",\n                          id: \"username\",\n                          className: 'form-control' + (error && \"is-invalid\")\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 78,\n                          columnNumber: 17\n                        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"invalid-feedback\",\n                          children: error\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 86,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 76,\n                        columnNumber: 13\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"password\",\n                          children: \"Mot de Passe\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 89,\n                          columnNumber: 17\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          value: credentials.password,\n                          onChange: handleChange,\n                          type: \"text\",\n                          placeholder: \"Mot de passe\",\n                          name: \"password\",\n                          id: \"password\",\n                          className: \"form-control\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 90,\n                          columnNumber: 17\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 88,\n                        columnNumber: 13\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"submit\",\n                          className: \"btn btn-success\",\n                          children: \"Je me connecte\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 99,\n                          columnNumber: 17\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 98,\n                        columnNumber: 13\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 75,\n                      columnNumber: 17\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-lg-6 d-flex align-items-center gradient-custom-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-white px-3 py-4 p-md-5 mx-md-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"mb-4\",\n                      children: \"FOR A BETTER NEXT\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"small mb-0\",\n                      children: \"1er Cabinet de conseil fran\\xE7ais \\xE0 vous accompagner dans vos projets de transformation de fa\\xE7on illimit\\xE9.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 17\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Connection, \"QBqKOEXC+psQjLxh1iQJ1K41LgA=\");\n\n_c = Connection;\nexport default Connection;\n\nvar _c;\n\n$RefreshReg$(_c, \"Connection\");","map":{"version":3,"sources":["/var/www/foxt_partage/FOXT/front/foxt_front/src/Components/Connection/Connection.js"],"names":["React","useState","useEffect","Axios","jwt_decode","Connection","props","console","log","credentials","setCredentials","username","password","error","setError","handleChange","event","value","currentTarget","name","handleSubmit","preventDefault","cle","token","post","then","response","data","decoded","localStorage","role","roles","prenom","nom","window","location","href","setItem","defaults","headers"],"mappings":"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","sourcesContent":["import './Connection.css';\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\n\n\n\nconst Connection = props => {\n        console.log(props);\n\n        const [credentials, setCredentials] = useState({\n            username: \"\",\n            password: \"\"\n        });\n\n        const [error, setError] = useState(\"\");\n\n    const handleChange = (event)=>{\n        const value = event.currentTarget.value\n        const name = event.currentTarget.name\n\n        setCredentials({...credentials, [name]: value})\n    }\n\n    const handleSubmit = async event=>{\n        event.preventDefault();\n        console.log(credentials);\n      let cle;\n        try{\n          const token = await Axios\n            .post(\"https://127.0.0.1:8000/api/login_check\", credentials)\n            .then(response => cle =response.data.token)\n            console.log(cle)\n            var decoded = jwt_decode(token);\n            localStorage.role = decoded.roles[0];\n            localStorage.username = decoded.username;\n            localStorage.prenom = decoded.prenom;\n            localStorage.nom = decoded.nom;\n            \n            {localStorage.role == \"courrier\" && (window.location.href = \"/clients/liste/\")\n\n            };\n            // .then(response => window.location.href = \"/clients/liste/\")\n\n        // Stockage du token dans le local storage\n        window.localStorage.setItem(\"authToken\", token);\n        // On prévient Axios qu'on a un header par défaut sur toutes nos futures requetes\n        Axios.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n\n        \n\n        } catch(error){\n            console.log(error.response);\n            setError(\"Aucun compte ne possède cette adresse\");\n        }\n    }\n    \n    return (\n    <>\n       \n        <section className=\"h-100 gradient-form\" styles=\"background-color: #eee;\">\n  <div className=\"container py-5 h-100\">\n    <div className=\"row d-flex justify-content-center align-items-center h-100\">\n      <div className=\"col-xl-10\">\n        <div className=\"card rounded-3 text-black\">\n          <div className=\"row g-0\">\n            <div className=\"col-lg-6\">\n              <div className=\"card-body p-md-5 mx-md-4\">\n\n                <div className=\"text-center\">\n                  {/* <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/lotus.webp\" style=\"width: 185px;\" alt=\"logo\"></img> */}\n                  <h4 className=\"mt-1 mb-5 pb-1\">CONNEXION</h4>\n                </div>\n                <form onSubmit={handleSubmit}>\n            <div className='form-group'>\n                <label  htmlFor=\"username\">Adresse email</label>\n                <input \n                value={credentials.username} \n                onChange={handleChange}\n                type=\"email\" \n                placeholder=\"Adresse mail de connexion\" \n                name=\"username\" id=\"username\"\n                className={'form-control'+(error && \"is-invalid\")}\n                />\n                {error && <p className='invalid-feedback'>{error}</p>}\n            </div>\n            <div className='form-group'>\n                <label htmlFor=\"password\">Mot de Passe</label>\n                <input \n                value={credentials.password}\n                onChange={handleChange}\n                type=\"text\" placeholder=\"Mot de passe\" \n                name=\"password\" id=\"password\"\n                className='form-control'/>\n                \n            </div>\n            <div className='form-group'>\n                <button type=\"submit\" className='btn btn-success'>\n                Je me connecte\n                </button>\n            </div>\n        </form> \n                \n\n              </div>\n            </div>\n            <div className=\"col-lg-6 d-flex align-items-center gradient-custom-2\">\n              <div className=\"text-white px-3 py-4 p-md-5 mx-md-4\">\n                <h4 className=\"mb-4\">FOR A BETTER NEXT</h4>\n                <p className=\"small mb-0\">1er Cabinet de conseil français à vous accompagner dans vos projets de transformation de façon illimité.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n    </>\n    );\n}\n\nexport default Connection;\n"]},"metadata":{},"sourceType":"module"}